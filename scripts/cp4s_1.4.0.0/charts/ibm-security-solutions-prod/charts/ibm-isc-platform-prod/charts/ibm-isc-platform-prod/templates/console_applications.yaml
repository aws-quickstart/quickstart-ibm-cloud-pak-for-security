# Create Console Application instances as an ISCInventory component
{{- $console_apps := merge .Values.global.system_apps .Values.global.user_apps }}
{{- range $k, $v := $console_apps }}
apiVersion: isc.ibm.com/v1
kind: ISCInventory
metadata:
  name: console-app-{{ $k }}
  labels:
    sort: console-app
    instance: {{ $k }}
    app.kubernetes.io/name: {{ $.Chart.Name }}
    helm.sh/chart: {{ $.Chart.Name }}-{{ $.Chart.Version | replace "+" "_" }}
    release: {{ $.Release.Name }}
    app.kubernetes.io/instance: default
    app.kubernetes.io/managed-by: {{ $.Release.Service }}
spec:
  labels:
    sort: console-app
    instance: {{ $k }}
  title: {{ default $k $v.title }}
  text: {{ default $k $v.text }}
  applicationId: {{ $k }}
  launchUrl: {{ default "" $v.launchUrl }}
  imageUrl: {{ default "" $v.imageUrl }}
  showInHomepage: {{ if (hasKey $v "showInHomepage") }}{{ $v.showInHomepage }}{{ else }}true{{ end }}
---
{{- end }}
